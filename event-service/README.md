# Event Service

Event Service – Read-only API для событий устройств (Cassandra).
## Обзор

Event Service — это высокопроизводительный read-only микросервис для получения событий устройств, использующий Apache Cassandra в качестве горизонтально масштабируемого хранилища.
При запуске собирается и экспортируется библиотека event-client в Nexus репозиторий.

## Технологии

- **Java 24** - Язык программирования
- **Spring Boot 3.5** - Фреймворк приложения
- **Cassandra** - Распределенная база данных
- **Nexus** - Централизованное хранилище библиотек
- **Testcontainers** - Фреймворк для интеграционного тестирования
- **Gradle** - Система сборки

# Развертывание и эксплуатация

## Публикация библиотеки
При запуске build в поднятый центральный репозиторий кладется библиотека event-client (http://localhost:8081).
(логин/пароль по умолчанию: `admin` / `admin`).

## Мониторинг

Необходимо в Grafana добавить источник данных в виде Prometheus

Сервис предоставляет метрики через эндпоинт Spring Boot Actuator /actuator/prometheus

liveness/readiness пробы

# Инструкция по локальному запуску

```bash
make help
```

##  Запуск необходимой инфраструктуры
Откройте .env.example в редакторе, измените пароли/логины по желанию

```bash
make event-service-infra-up
```

#  Проверка работы
```bash
make events-service-infra-check
```

# Запуск Spring Boot приложения

Для запуска сервиса при необходимости нужные установите переменные окружения или используйте дефолтные (.properties)

Запустите unit и интеграционные тесты
```bash
make event-service-app-test
```

Запустите приложение
```bash
make event-service-app-run
```